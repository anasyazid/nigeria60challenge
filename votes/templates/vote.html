{% extends 'index.html' %}
{% load static %}
{% load utils %}
{% block header %} {% endblock %}
{% block body %}

    <!-- Header Area wrapper Starts -->

    <!-- Hero Area Start -->
    <div id="hero-area" class="hero-area-bg">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title wow fadeInDown" data-wow-delay="0.3s">
                    Vote Nigeria@60 Brand
                </h2>
                <div class="shape wow fadeInDown" data-wow-delay="0.3s"></div>
            </div>

            <div>

                <div class="row pt-4">
                    <div
                            class="col-12 col-sm-12 col-md-6 col-lg-3 d-flex flex-column align-items-center"
                    >
                        <img class="vote-logo" src="{% static "assets/img/coa.png" %}" alt=""/>

                        <label for="design-1" href="#" class="btn btn-border mt-4 mb-2">Vote this logo</label>
                        <p
                                class="mb-2 pointer text-underline"
                                data-toggle="modal"
                                data-target="#exampleModal1"
                        >
                            Read the Design Rationale
                        </p>

                        <div class="mb-2 myProgress">
                            <div id="myBar"></div>
                        </div>
                        <h5 class="mb-5">{{ polls | get_count:1 }}</h5>
                    </div>
                    <div
                            class="col-12 col-sm-12 col-md-6 col-lg-3 d-flex flex-column align-items-center"
                    >
                        <img class="vote-logo" src="{% static "assets/img/coa.png" %}" alt=""/>
                        <label for="design-2" href="#" class="btn btn-border mt-4 mb-2">Logo Selected</label>
                        <p
                                class="mb-2 pointer text-underline"
                                data-toggle="modal"
                                data-target="#exampleModal2"
                        >
                            Read the Design Rationale
                        </p>

                        <div class="mb-2 myProgress">
                            <div id="myBar1"></div>
                        </div>
                        <h5 class="mb-5">{{ polls | get_count:2 }}</h5>

                    </div>
                    <div
                            class="col-12 col-sm-12 col-md-6 col-lg-3 d-flex flex-column align-items-center"
                    >
                        <img class="vote-logo" src="{% static "assets/img/coa.png" %}" alt=""/>

                        <label for="design-3" href="#" class="btn btn-border mt-4 mb-2">Vote this logo</label>
                        <p
                                class="mb-2 pointer text-underline"
                                data-toggle="modal"
                                data-target="#exampleModal3"
                        >
                            Read the Design Rationale
                        </p>

                        <div class="mb-2 myProgress">
                            <div id="myBar2"></div>
                        </div>
                        <h5 class="mb-5">{{ polls | get_count:3 }}</h5>
                    </div>
                    <div
                            class="col-12 col-sm-12 col-md-6 col-lg-3 d-flex flex-column align-items-center"
                    >
                        <img class="vote-logo" src="{% static "assets/img/coa.png" %}" alt=""/>
                        <label for="design-4" href="#" class="btn btn-border mt-4 mb-2">Vote this logo</label>
                        <p
                                class="mb-2 pointer text-underline"
                                data-toggle="modal"
                                data-target="#exampleModal4"
                        >
                            Read the Design Rationale
                        </p>

                        <div class="mb-2 myProgress">
                            <div id="myBar3"></div>
                        </div>
                        <h5 class="mb-5">{{ polls | get_count:4 }}</h5>
                    </div>
                </div>

                <div class="text-center">
                    <p class="text-green">Total Vote count</p>
                    <h3>{{ vote_count }}</h3>
                </div>

                <form method="post" id="vote-form">
                    {% csrf_token %}
                    <div class="d-none">
                        <input type="submit" id="submit-form"/>
                        <input type="text" name="facebook_id" id="facebook_id"/>
                        <input type="text" name="facebook_token" id="facebook_token"/>
                        <input type="radio" name="design_id" id="design-1" value="1"/>
                        <input type="radio" name="design_id" id="design-2" value="2"/>
                        <input type="radio" name="design_id" id="design-3" value="3"/>
                        <input type="radio" name="design_id" id="design-4" value="4"/>
                    </div>
                    {% for key, value in form.errors.items %}
                        <span class="text-danger">{{ value }}</span>
                    {% endfor %}
                    <div class="mt-4">
                        <div class="mt-4">
                            <input placeholder="Full Name*" name="full_name" id="full_name" type="text" required=""/>
                        </div>
                    </div>

                    <div class="mt-4">
                        <div class="mt-4">
                            <input placeholder="Phone Number*" name="phone_number" id="phone_number" type="text"
                                   required=""/>
                        </div>
                    </div>

                    <div class="mt-4">
                        <div class="mt-5 d-flex justify-content-between">
                            <div>
                                <label
                                        for="login-fb"
                                        class="btn btn-common"
                                        onclick="customFBLogin()"
                                        {#                                        data-toggle="modal"#}
                                        {#                                        data-target="#exampleModal"#}
                                >
                                    <i class="lni-facebook mr-2 mt-1"></i> Sign In to Complete
                                    vote</label
                                >
                            </div>
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>
    <!-- Hero Area End -->

    <!-- Button trigger modal -->
    <!-- Modal -->
    <div
            class="modal fade"
            id="exampleModal"
            tabindex="-1"
            aria-labelledby="exampleModalLabel"
            aria-hidden="true"
    >
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <p class="text-center">
                        Thank you for voting. <br/>
                        <b>Your vote has been recorded.</b>
                    </p>
                </div>
                <div class="modal-footer d-flex flex-row justify-content-center">
                    <button type="button" class="btn btn-common">
                        View Current Results
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Design Rationales -->

    <!-- Modal -->
    <div
            class="modal fade modal-wide"
            id="exampleModal1"
            tabindex="-1"
            aria-labelledby="exampleModalLabel"
            aria-hidden="true"
    >
        <div class="modal-dialog modal-wide">
            <div class="modal-content">
                <div
                        class="modal-body d-flex flex-column justify-content-center align-items-center"
                >
                    <img class="vote-logo" src="{% static "assets/img/coa.png" %}" alt=""/>
                    <p class="text-center">
                        <b>ONE NATION BOUND IN FREEDOM, PEACE & UNITY</b>
                    </p>
                    <p class="text-center">
                        This imagery is first a creative affirmation of the last line in
                        Nigeria’s national anthem. In 60 years, we have remained “one
                        nation bound in freedom, peace and unity.” <br> This anniversary logo
                        is a creative celebration of the centripetal blessings we possess
                        together, without which we would not have become Africa’s largest
                        market and an alluring market to discerning investors. <br> These
                        bedrocks are represented by 3 strong chords woven around the
                        Nigerian Map, in different shades of green and white, our national
                        colors <br> The WHITE CHORD is symbolic of the goodness of our hearts
                        the brilliance of our brains and the peace that has kept us
                        together as one from the beginning, for which our nation even
                        fought to preserve <br> Another chord is the LIME GREEN chord that
                        depicts our collective strength, liveliness and the creativity
                        that inspire the greatness the world sees in us as a people <br>
                        Generally in branding, green represents wealth, stability,
                        renewal, new beginning and nature Dark greens are usually used to
                        depict wealth <br> The PEAR GREEN chord shows the world our sweet,
                        warm and welcoming spirit as well as the love we share with not
                        just one another, but the entire humanity The LOVE that has kept
                        us TOGETHER <br> The DARK GREEN traversing the entire country is a
                        reminder of the inherent wealth if we stay together natural
                        resources and human capital which TOGETHER uniquely make us the
                        MOST PROSPEROUS BLACK NATION in the world and Africa’s largest
                        market <br> The logo is a celebration of what we have become by
                        staying together and growing together ONE NATION bound in freedom,
                        peace and unity It is also a reminder of what we can become if we
                        continue to stay together.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div
            class="modal fade modal-wide"
            id="exampleModal2"
            tabindex="-1"
            aria-labelledby="exampleModalLabel"
            aria-hidden="true"
    >
        <div class="modal-dialog modal-wide">
            <div class="modal-content">
                <div
                        class="modal-body d-flex flex-column justify-content-center align-items-center"
                >
                    <img class="vote-logo" src="{% static "assets/img/coa.png" %}" alt=""/>
                    <p class="text-center">
                        <b>ONE NATION BOUND IN FREEDOM, PEACE & UNITY</b>
                    </p>
                    <p class="text-center">
                        This imagery is first a creative affirmation of the last line in
                        Nigeria’s national anthem. In 60 years, we have remained “one
                        nation bound in freedom, peace and unity.” <br> This anniversary logo
                        is a creative celebration of the centripetal blessings we possess
                        together, without which we would not have become Africa’s largest
                        market and an alluring market to discerning investors. <br> These
                        bedrocks are represented by 3 strong chords woven around the
                        Nigerian Map, in different shades of green and white, our national
                        colors <br> The WHITE CHORD is symbolic of the goodness of our hearts
                        the brilliance of our brains and the peace that has kept us
                        together as one from the beginning, for which our nation even
                        fought to preserve <br> Another chord is the LIME GREEN chord that
                        depicts our collective strength, liveliness and the creativity
                        that inspire the greatness the world sees in us as a people <br>
                        Generally in branding, green represents wealth, stability,
                        renewal, new beginning and nature Dark greens are usually used to
                        depict wealth <br> The PEAR GREEN chord shows the world our sweet,
                        warm and welcoming spirit as well as the love we share with not
                        just one another, but the entire humanity The LOVE that has kept
                        us TOGETHER <br> The DARK GREEN traversing the entire country is a
                        reminder of the inherent wealth if we stay together natural
                        resources and human capital which TOGETHER uniquely make us the
                        MOST PROSPEROUS BLACK NATION in the world and Africa’s largest
                        market <br> The logo is a celebration of what we have become by
                        staying together and growing together ONE NATION bound in freedom,
                        peace and unity It is also a reminder of what we can become if we
                        continue to stay together.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div
            class="modal fade modal-wide"
            id="exampleModal3"
            tabindex="-1"
            aria-labelledby="exampleModalLabel"
            aria-hidden="true"
    >
        <div class="modal-dialog modal-wide">
            <div class="modal-content">
                <div
                        class="modal-body d-flex flex-column justify-content-center align-items-center"
                >
                    <img class="vote-logo" src="{% static "assets/img/coa.png" %}" alt=""/>
                    <p class="text-center">
                        <b>ONE NATION BOUND IN FREEDOM, PEACE & UNITY</b>
                    </p>
                    <p class="text-center">
                        This imagery is first a creative affirmation of the last line in
                        Nigeria’s national anthem. In 60 years, we have remained “one
                        nation bound in freedom, peace and unity.” <br> This anniversary logo
                        is a creative celebration of the centripetal blessings we possess
                        together, without which we would not have become Africa’s largest
                        market and an alluring market to discerning investors. <br> These
                        bedrocks are represented by 3 strong chords woven around the
                        Nigerian Map, in different shades of green and white, our national
                        colors <br> The WHITE CHORD is symbolic of the goodness of our hearts
                        the brilliance of our brains and the peace that has kept us
                        together as one from the beginning, for which our nation even
                        fought to preserve <br> Another chord is the LIME GREEN chord that
                        depicts our collective strength, liveliness and the creativity
                        that inspire the greatness the world sees in us as a people <br>
                        Generally in branding, green represents wealth, stability,
                        renewal, new beginning and nature Dark greens are usually used to
                        depict wealth <br> The PEAR GREEN chord shows the world our sweet,
                        warm and welcoming spirit as well as the love we share with not
                        just one another, but the entire humanity The LOVE that has kept
                        us TOGETHER <br> The DARK GREEN traversing the entire country is a
                        reminder of the inherent wealth if we stay together natural
                        resources and human capital which TOGETHER uniquely make us the
                        MOST PROSPEROUS BLACK NATION in the world and Africa’s largest
                        market <br> The logo is a celebration of what we have become by
                        staying together and growing together ONE NATION bound in freedom,
                        peace and unity It is also a reminder of what we can become if we
                        continue to stay together.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div
            class="modal fade modal-wide"
            id="exampleModal4"
            tabindex="-1"
            aria-labelledby="exampleModalLabel"
            aria-hidden="true"
    >
        <div class="modal-dialog modal-wide">
            <div class="modal-content">
                <div
                        class="modal-body d-flex flex-column justify-content-center align-items-center"
                >
                    <img class="vote-logo" src="{% static "assets/img/coa.png" %}" alt=""/>
                    <p class="text-center">
                        <b>ONE NATION BOUND IN FREEDOM, PEACE & UNITY</b>
                    </p>
                    <p class="text-center">
                        This imagery is first a creative affirmation of the last line in
                        Nigeria’s national anthem. In 60 years, we have remained “one
                        nation bound in freedom, peace and unity.” <br> This anniversary logo
                        is a creative celebration of the centripetal blessings we possess
                        together, without which we would not have become Africa’s largest
                        market and an alluring market to discerning investors. <br> These
                        bedrocks are represented by 3 strong chords woven around the
                        Nigerian Map, in different shades of green and white, our national
                        colors <br> The WHITE CHORD is symbolic of the goodness of our hearts
                        the brilliance of our brains and the peace that has kept us
                        together as one from the beginning, for which our nation even
                        fought to preserve <br> Another chord is the LIME GREEN chord that
                        depicts our collective strength, liveliness and the creativity
                        that inspire the greatness the world sees in us as a people <br>
                        Generally in branding, green represents wealth, stability,
                        renewal, new beginning and nature Dark greens are usually used to
                        depict wealth <br> The PEAR GREEN chord shows the world our sweet,
                        warm and welcoming spirit as well as the love we share with not
                        just one another, but the entire humanity The LOVE that has kept
                        us TOGETHER <br> The DARK GREEN traversing the entire country is a
                        reminder of the inherent wealth if we stay together natural
                        resources and human capital which TOGETHER uniquely make us the
                        MOST PROSPEROUS BLACK NATION in the world and Africa’s largest
                        market <br> The logo is a celebration of what we have become by
                        staying together and growing together ONE NATION bound in freedom,
                        peace and unity It is also a reminder of what we can become if we
                        continue to stay together.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous"
            src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&autoLogAppEvents=1&version=v8.0&appId=1507920232743187"
            nonce="oLnEwODt"></script>
    <!-- Button trigger modal -->
    <!-- Modal -->

    <style>
        .myProgress {
            width: 100%;
            background-color: #00583550;
            margin: 0 5px;
            border-radius: 5px;
        }

        #myBar {
            width: 30%;
            height: 10px;
            background-color: #005835;
            border-radius: 5px;
        }

        #myBar1 {
            width: 30%;
            height: 10px;
            background-color: #005835;
            border-radius: 5px;
        }

        #myBar2 {
            width: 30%;
            height: 10px;
            background-color: #005835;
            border-radius: 5px;
        }

        #myBar3 {
            width: 30%;
            height: 10px;
            background-color: #005835;
            border-radius: 5px;
        }
    </style>

{% endblock %}

{% block customjs %}

    <script>
        window.fbAsyncInit = function () {
            FB.init({
                appId: '1507920232743187',
                cookie: true,
                xfbml: true,
                version: 'v8.0'
            });

            FB.AppEvents.logPageView();
            checkLoginState()
        };

        function customFBLogin() {
            var full_name = document.getElementById('full_name').value
            var phone_number = document.getElementById('phone_number').value

            if (full_name.length === 0 || phone_number.length < 10) {
                return window.alert("Please enter your full name and phone number")
            }

            {% if ':8000' in request.META.HTTP_HOST %}
                document.getElementById('facebook_id').value = "FB-id" + Date.now()
                document.getElementById('facebook_token').value = "FBT" + Date.now()
                document.getElementById('submit-form').click()
            {% else %}

                FB.login(function (response) {
                    if (response.status === 'connected') {
                        console.log(response)
                        document.getElementById('facebook_id').value = response.authResponse.userID
                        document.getElementById('facebook_token').value = response.authResponse.accessToken

                        document.getElementById('submit-form').click()
                        // Logged into your webpage and Facebook.
                    } else {
                        // The person is not logged into your webpage or we are unable to tell.
                    }
                }, {scope: 'public_profile,email'})
            {% endif %}
        }

        function checkLoginState() {
            FB.getLoginStatus(function (response) {
                console.log(response)
            });
        }

        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement(s);
            js.id = id;
            js.src = "https://connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));


    </script>

    <script>
        new TimezZ("#timer", {
            date: "Oct 1, 2020",
        });
    </script>
    <script>
        $(document).ready(function () {
            $("#announcement").nivoLightbox();
        });
    </script>
    <script>
        (function () {
            "use strict";

            // define variables
            var items = document.querySelectorAll(".timeline li");

            // check if an element is in viewport
            // http://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport
            function isElementInViewport(el) {
                var rect = el.getBoundingClientRect();
                return (
                    rect.top >= 0 &&
                    rect.left >= 0 &&
                    rect.bottom <=
                    (window.innerHeight || document.documentElement.clientHeight) &&
                    rect.right <=
                    (window.innerWidth || document.documentElement.clientWidth)
                );
            }

            function callbackFunc() {
                for (var i = 0; i < items.length; i++) {
                    if (isElementInViewport(items[i])) {
                        items[i].classList.add("in-view");
                    }
                }
            }

            // listen for events
            window.addEventListener("load", callbackFunc);
            window.addEventListener("resize", callbackFunc);
            window.addEventListener("scroll", callbackFunc);
        })();
    </script>
    <script>
        $("#myModal").on("shown.bs.modal", function () {
            $("#myInput").trigger("focus");
        });
    </script>
    <script>

        function move() {

            var elem = document.getElementById("myBar");
            var elem1 = document.getElementById("myBar1");
            var elem2 = document.getElementById("myBar2");
            var elem3 = document.getElementById("myBar3");
            var width = 30;
            var width1 = 20;
            var width2 = 50;
            var width3 = 10;
            var id = setInterval(frame, 10);

            function frame() {
                elem.style.width = {% percentage polls 1 vote_count %} +"%";
                elem1.style.width = {% percentage polls 2 vote_count %} +"%";
                elem2.style.width = {% percentage polls 3 vote_count %} +"%";
                elem3.style.width = {% percentage polls 4 vote_count %} +"%";
            }
        }

        window.onload = move();
    </script>
{% endblock %}